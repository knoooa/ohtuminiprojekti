{% extends "layout.html" %}

{% block title %}Citation in BibTeX format{% endblock %}
{% block body %}

<h1>üìÑ BibTeX Format</h1>
<div class="nav-links">
  <a href="{{ url_for('citations_view') }}">Back to Citations</a>
  <a href="{{ url_for('index') }}">Create New Citation</a>
</div>

{% if citation %}
<h2>Citation: <strong>{{ citation.citation_key }}</strong></h2>
<p style="color: #666;">Type: <strong>@{{ citation.entry_type }}</strong></p>

<pre id="bibtex">{{ citation.to_bibtex() }}</pre>

<div style="margin-top: 20px;">
  <button onclick="copy_to_clipboard('bibtex')" class="btn-success">üìã Copy to Clipboard</button>
  <a href="{{ url_for('edit_citation', citation_id=citation.id) }}" style="display: inline-block; padding: 12px 24px; background: #667eea; color: white; border-radius: 6px; text-decoration: none; font-weight: 500;">‚úèÔ∏è Edit Citation</a>
  <a href="{{ url_for('citations_view') }}" style="display: inline-block; padding: 12px 24px; background: #6c757d; color: white; border-radius: 6px; text-decoration: none; font-weight: 500;">Back to List</a>
</div>

<script>
  function copy_to_clipboard(elm_id) {
    var text = document.getElementById(elm_id).innerHTML;
    navigator.clipboard.writeText(text);
    
    // Show feedback to user
    var btn = event.target;
    var originalText = btn.innerHTML;
    btn.innerHTML = '‚úÖ Copied!';
    btn.style.background = '#28a745';
    
    setTimeout(function() {
      btn.innerHTML = originalText;
      btn.style.background = '#667eea';
    }, 2000);
  }
</script>
{% else %}
<h1>Citation Not Found</h1>
<p>The citation you're looking for doesn't exist.</p>
<div style="margin-top: 20px;">
  <a href="{{ url_for('citations_view') }}" style="display: inline-block; padding: 12px 24px; background: #667eea; color: white; border-radius: 6px; text-decoration: none; font-weight: 500;">Back to Citations</a>
</div>
{% endif %}

{% endblock %}
