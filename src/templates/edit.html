{% extends "layout.html" %}

{% block title %}Edit Citation{% endblock %}

{% block body %}

{% if citation %}
<h1>‚úèÔ∏è Edit Citation</h1>
<div class="nav-links">
  <a href="{{ url_for('citations_view') }}">Back to Citations</a>
  <a href="{{ url_for('index') }}">Create New Citation</a>
</div>

<h2>Citation: <strong>{{ citation.citation_key }}</strong></h2>
<p style="color: #666;">Type: <strong>@{{ citation.entry_type }}</strong></p>

<form method="POST" action="{{ url_for('edit_citation', citation_id=citation.id) }}">
  <h3>Citation Details</h3>
  <label>Citation Key (Required):
    <input type="text" name="citation_key" value="{{ citation.citation_key }}" required>
  </label>
  {% for f, val in citation.fields|dictsort %}
  <label>{{ f.replace("_", " ").capitalize() }}:
    <input type="text" name="{{ f }}" value="{{ val }}">
  </label>
  {% endfor %}
  <div style="margin-top: 20px;">
    <button type="submit" class="btn-success">üíæ Save Changes</button>
    <a href="{{ url_for('citations_view') }}" style="display: inline-block; padding: 12px 24px; background: #6c757d; color: white; border-radius: 6px; text-decoration: none; font-weight: 500;">Cancel</a>
  </div>
</form>
{% else %}
<h1>Citation Not Found</h1>
<p>The citation you're looking for doesn't exist.</p>
<div style="margin-top: 20px;">
  <a href="{{ url_for('citations_view') }}" style="display: inline-block; padding: 12px 24px; background: #667eea; color: white; border-radius: 6px; text-decoration: none; font-weight: 500;">Back to Citations</a>
</div>
{% endif %}

{% endblock %}
