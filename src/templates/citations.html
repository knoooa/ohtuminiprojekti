{% extends "layout.html" %}

{% block title %}Saved Citations{% endblock %}

{% block body %}
<h1>Saved Citations</h1>
<p>Enter new citations <a href="/" style="font-size:18px;">here</a></p>

{% if books %}
  {% for book in books %}
    <div class="citation" id="book-{{ book.id }}">
    {{ book.author }} ({{ book.year }}).
    <strong>{{ book.title }}</strong>.
    {{ book.publisher }}
    {% if book.address %}, {{ book.address }}{% endif %}.
    <a href="/edit/{{ book.id }}">Edit</a>
    <form id="delete-form-{{ book.id }}" action="/citations/delete/{{ book.id }}" method="POST" style="display:inline;">
      <button type="button" onclick="confirmDelete({{ book.id }})">Delete</button>
    </form>
  </div>
  {% endfor %}
{% else %}
  <p>No saved citations yet.</p>
{% endif %}
{% endblock %}
<script>
    function confirmDelete(bookId) {
        if (confirm("Are you sure you want to delete this citation?")) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = `/citations/delete/${bookId}`;
            document.body.appendChild(form);
            form.submit();
        }
    }
</script>
</body>
</html>
